<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="css/screen.css">
    <title>Discovery</title>
</head>
<body>
    <div class="header">
        Select an institution to login to the service: <span class="serviceName">{{ displayName }}</span>
    </div>

    <div class="container">
        <form class="filter" method="get" action="http://localhost:8080/index.php?entityID=https://labrat.eduvpn.nl/saml&returnIDParam=IdP&return=https://labrat.eduvpn.nl/foo/bar?x=a">
            <input type="hidden" name="returnIDParam" value="{{ returnIDParam }}">
            <input type="hidden" name="entityID" value="{{ entityID }}">
            <input type="hidden" name="return" value="{{ return }}">

            <input {% if not lastChosen and not filter %}autofocus="autofocus"{% endif %} value="{{ filter }}" name="filter" id="filter" tabindex="1" type="text" autocomplete="off" placeholder="Search for an institution...">
        </form>

        {% if lastChosen %}
            <div class="listHeader">Previously chosen</div>
            <ul class="list">
                <li>
                    <form class="entity" method="post">
                        <button autofocus="autofocus" name="idpEntityID" value="{{ lastChosen.entityID }}" tabindex="2">
                            {% if useLogos %}<img src="logo/idp/{{ lastChosen.entityID|url_encode }}.png">{% endif %}{{ lastChosen.displayName }}
                        </button>
                    </form>
                </li>
            </ul>
        {% endif %}

        <div class="listHeader">Institutes with access</div>

        <ul id="disco" class="list">
            {% for key, idp in idpList %}
                <li>
                    <form class="entity" method="post">
                        <button {% if filter and key == 0 %}autofocus="autofocus"{% endif %} name="idpEntityID" value="{{ idp.entityID }}" tabindex="{{ key + 2 }}" class="name" data-keywords="{{ idp.keywords|join(' ') }}">
                            {% if useLogos %}<img src="logo/idp/{{ idp.entityID|url_encode }}.png">{% endif %}{{ idp.displayName }}
                        </button>
                    </form>
                </li>
            {% endfor %}
        </ul>
    </div> <!-- /container -->
    <!-- <script src="js/filter.js"></script> -->
</body>
</html>
